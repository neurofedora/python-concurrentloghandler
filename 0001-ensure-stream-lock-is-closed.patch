From bbe07ff5c112cce2501febe04935b8a1cfed29c7 Mon Sep 17 00:00:00 2001
From: Dan Callaghan <dcallagh@redhat.com>
Date: Thu, 16 May 2013 17:07:40 +1000
Subject: [PATCH 1/3] ensure stream lock is closed


diff --git a/src/cloghandler.py b/src/cloghandler.py
index 090d9d6..c4a7a3f 100644
--- a/src/cloghandler.py
+++ b/src/cloghandler.py
@@ -209,6 +209,8 @@ class ConcurrentRotatingFileHandler(BaseRotatingHandler):
         if not self.stream.closed:
             self.stream.flush()
             self.stream.close()
+        if not self.stream_lock.closed:
+            self.stream_lock.close()
         Handler.close(self)
     
     def flush(self):
-- 
1.8.1.4

